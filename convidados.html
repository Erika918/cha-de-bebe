<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ConfirmaÃ§Ã£o - ChÃ¡ Evelyn</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    button[type="submit"] {
      background-color: #d55dbd;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }

    button[type="submit"]:hover {
      background-color: #b1489d;
    }

    #senha-container {
      margin-top: 40px;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ConfirmaÃ§Ã£o de PresenÃ§a</h1>
    <p>ğŸ“ Local: Alameda dos JacarandÃ¡s, 1100 â€“ Vale das AcÃ¡cias</p>
    <p>âš ï¸ Trazer: Traje de banho, toalha</p>
    <p>ğŸ· Traga sua bebida de preferÃªncia</p>
    <p>ğŸ SugestÃ£o de presente: <span id="presente">Fralda M + mimo</span></p>

    <form id="form" onsubmit="enviarFormulario(event)">
      <label for="nome">Seu nome:</label>
      <input type="text" id="nome" required />
      <p>VocÃª vai comparecer?</p>
      <label><input type="radio" name="presenca" value="Sim" required> Sim</label>
      <label><input type="radio" name="presenca" value="NÃ£o"> NÃ£o</label><br>
      <button type="submit">Confirmar PresenÃ§a</button>
    </form>

    <div id="admin-section" style="display: none; margin-top: 30px;">
      <h2>Confirmados:</h2>
      <ul id="lista-confirmados"></ul>
      <button onclick="exportarLista()">ğŸ“ Baixar Lista</button>
    </div>

    <div id="senha-container">
      <label for="senha">ğŸ”’ Ãrea restrita a Erika:</label>
      <input type="password" id="senha" />
      <button onclick="verificarSenha()">Acessar</button>
    </div>
  </div>

  <audio id="musica" loop>
    <source src="musica.mp3" type="audio/mpeg" />
    Seu navegador nÃ£o suporta Ã¡udio.
  </audio>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>

  <!-- Firebase Config -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCogG96fMtt3bp6Xx84si3wk8cugN9aRHI",
      authDomain: "cha-de-bebe-evelyn.firebaseapp.com",
      projectId: "cha-de-bebe-evelyn",
      storageBucket: "cha-de-bebe-evelyn.firebasestorage.app",
      messagingSenderId: "505877059168",
      appId: "1:505877059168:web:fc9c05111e97702cca1505",
      databaseURL: "https://cha-de-bebe-evelyn-default-rtdb.firebaseio.com"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>

  <!-- Scripts do site -->
  <script>
    const musica = document.getElementById('musica');

    function tocarMusica() {
      musica.play().catch(() => {
        console.log('Erro ao tentar tocar mÃºsica');
      });
      window.removeEventListener('click', tocarMusica);
      window.removeEventListener('scroll', tocarMusica);
      window.removeEventListener('keydown', tocarMusica);
    }

    window.addEventListener('click', tocarMusica);
    window.addEventListener('scroll', tocarMusica);
    window.addEventListener('keydown', tocarMusica);

    function enviarFormulario(event) {
      event.preventDefault();

      const nome = document.getElementById("nome").value;
      const presenca = document.querySelector('input[name="presenca"]:checked').value;
      const presente = document.getElementById("presente").innerText;

      // Salvar no Firebase
      const confirmacaoRef = database.ref("confirmacoes");
      confirmacaoRef.push({
        nome,
        presenca,
        presente,
        dataHora: new Date().toISOString()
      })
      .then(() => {
        alert("ConfirmaÃ§Ã£o enviada com sucesso!");
        window.location.href = "agradecimento.html";
      })
      .catch((error) => {
        alert("Erro ao enviar: " + error.message);
      });
    }
  </script>
</body>
</html>
