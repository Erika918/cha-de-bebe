<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Confirmação - Chá Evelyn</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    button[type="submit"] {
      background-color: #d55dbd;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }

    button[type="submit"]:hover {
      background-color: #b1489d;
    }

    #senha-container {
      margin-top: 40px;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Confirmação de Presença</h1>
    <p>📍 Local: Alameda dos Jacarandás, 1100 – Vale das Acácias</p>
    <p>⚠️ Trazer: Traje de banho, toalha</p>
    <p>🍷 Traga sua bebida de preferência</p>
    <p>🎁 Sugestão de presente: <span id="presente">Fralda M + mimo</span></p>

    <form id="form" onsubmit="enviarFormulario(event)">
      <label for="nome">Seu nome:</label>
      <input type="text" id="nome" required />
      <p>Você vai comparecer?</p>
      <label><input type="radio" name="presenca" value="Sim" required> Sim</label>
      <label><input type="radio" name="presenca" value="Não"> Não</label><br>
      <button type="submit">Confirmar Presença</button>
    </form>

    <div id="admin-section" style="display: none; margin-top: 30px;">
      <h2>Confirmados:</h2>
      <ul id="lista-confirmados"></ul>
      <button onclick="exportarLista()">📁 Baixar Lista</button>
    </div>

    <div id="senha-container">
      <label for="senha">🔒 Área restrita a Erika:</label>
      <input type="password" id="senha" />
      <button onclick="verificarSenha()">Acessar</button>
    </div>
  </div>

  <audio id="musica" loop>
    <source src="musica.mp3" type="audio/mpeg" />
    Seu navegador não suporta áudio.
  </audio>

  <script>
    const musica = document.getElementById('musica');

    function tocarMusica() {
      musica.play().catch(() => {
        console.log('Erro ao tentar tocar música');
      });
      window.removeEventListener('click', tocarMusica);
      window.removeEventListener('scroll', tocarMusica);
      window.removeEventListener('keydown', tocarMusica);
    }

    window.addEventListener('click', tocarMusica);
    window.addEventListener('scroll', tocarMusica);
    window.addEventListener('keydown', tocarMusica);

    function enviarFormulario(event) {
      event.preventDefault();

      const nome = document.getElementById("nome").value;
      const presenca = document.querySelector('input[name="presenca"]:checked').value;
      const presente = document.getElementById("presente").innerText;

      fetch("https://script.google.com/macros/s/AKfycbzinETNSQ3eyyC1Sv1ooW2ar7FGqxw5tL7O_HcF4RcVlwxaPPHMxL9He7w7VqOPJyc/exec", {
        method: "POST",
        body: JSON.stringify({ nome, presenca, presente, }),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(response => response.text())
      .then(data => {
        alert("Confirmação enviada com sucesso!");
        window.location.href = "agradecimento.html";
      })
      .catch(error => {
        alert("Erro ao enviar: " + error);
      });
    }
  </script>
</body>
</html>
